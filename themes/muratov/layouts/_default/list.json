{{- $scope := .RegularPages -}}
{{- $items := slice -}}
{{- $scope = where $scope "Draft" false -}}
{{- $scope = where $scope "WordCount" "gt" 0 -}}
{{- range $scope -}}
  {{- $items = $items | append (dict
    "url" .Permalink
    "title" .Title
    "description" (.Description | default "")
    "summary" (.Summary | plainify)
    "date" (.Date.Format "2006-01-02")
    "lastmod" (.Lastmod.Format "2006-01-02")
    "section" .Section
    "slug" (or .Params.slug .File.ContentBaseName)
    "categories" (default (slice) .Params.categories)
    "tags" (default (slice) .Params.tags)
    "reading_time" .ReadingTime
    "word_count" .WordCount
  ) -}}
{{- end -}}
{{- dict
  "scope" .Permalink
  "title" .Title
  "count" (len $items)
  "items" $items
| jsonify (dict "indent" "  ")
-}}
