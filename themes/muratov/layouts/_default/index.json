{{- $pages := where .Site.RegularPages "Section" "blog" -}}
{{- $pages = where $pages "Draft" false -}}
{{- $pages = where $pages "WordCount" "gt" 0 -}}
{{- $items := slice -}}
{{- range $pages.ByDate.Reverse -}}
  {{- $items = $items | append (dict
    "url" .Permalink
    "title" .Title
    "description" (.Description | default "")
    "summary" (.Summary | plainify)
    "date" (.Date.Format "2006-01-02")
    "lastmod" (.Lastmod.Format "2006-01-02")
    "section" .Section
    "slug" (or .Params.slug .File.ContentBaseName)
    "categories" (default (slice) .Params.categories)
    "tags" (default (slice) .Params.tags)
    "reading_time" .ReadingTime
    "word_count" .WordCount
  ) -}}
{{- end -}}
{{- dict
  "site" (dict
    "title" .Site.Title
    "base_url" .Site.BaseURL
    "generated_at" now
  )
  "count" (len $items)
  "items" $items
| jsonify (dict "indent" "  ")
-}}
