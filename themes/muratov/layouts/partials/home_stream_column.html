{{ $blogPosts := where site.RegularPages "Section" "blog" }}
{{ $blogPosts = where $blogPosts "Draft" false }}
{{ $storyPosts := slice }}
{{ $artifactPosts := slice }}
{{ range $blogPosts }}
{{ $path := lower .File.Path }}
{{ $kind := lower (default "" .Params.kind) }}
{{ if or (eq $kind "story") (in $path "blog/stories/") }}
{{ $storyPosts = $storyPosts | append . }}
{{ else if or (eq $kind "artifact") (in $path "blog/artifacts/") }}
{{ $artifactPosts = $artifactPosts | append . }}
{{ else }}
{{ $artifactPosts = $artifactPosts | append . }}
{{ end }}
{{ end }}
{{ $storyPosts = sort $storyPosts "Date" "desc" }}
{{ $artifactPosts = sort $artifactPosts "Date" "desc" }}
{{ $posts := $storyPosts }}
{{ if eq (len $posts) 0 }}
{{ $posts = $artifactPosts }}
{{ end }}
{{ $olderPosts := after 1 $posts }}
{{ if gt (len $olderPosts) 0 }}
<aside class="home-stream-column" aria-label="Previous posts">
  <section class="home-stream">
    <div class="home-section-head">
      <h3>Previous Posts</h3>
    </div>
    <ul class="home-stream-list">
      {{ range $olderPosts }}
      <li>
        <span>{{ .Date.Format "Jan 2, 2006" }}</span>
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </li>
      {{ end }}
    </ul>
  </section>
</aside>
{{ end }}
