<script>
function estimatePasswordStrength(pw) {
    let charsetSize = 0;
    if (/[a-z]/.test(pw)) charsetSize += 26;
    if (/[A-Z]/.test(pw)) charsetSize += 26;
    if (/[0-9]/.test(pw)) charsetSize += 10;
    if (/[^a-zA-Z0-9]/.test(pw)) charsetSize += 32; // Approx for symbols

    const entropy = pw.length * Math.log2(charsetSize || 1);
    const attemptsPerSecond = 1e9; // Assume 1 billion guesses/second (modern GPUs)

    const secondsToCrack = Math.pow(2, entropy) / attemptsPerSecond;
    const readableTime = secondsToCrack > 1e9 ? (secondsToCrack / 3.154e7).toFixed(2) + ' years' :
                          secondsToCrack > 3600 ? (secondsToCrack / 3600).toFixed(2) + ' hours' :
                          secondsToCrack > 60 ? (secondsToCrack / 60).toFixed(2) + ' minutes' :
                          secondsToCrack.toFixed(2) + ' seconds';

    return {
        entropy: entropy.toFixed(2),
        time: readableTime
    };
}

document.addEventListener("DOMContentLoaded", () => {
    const pwInput = document.getElementById("pw");
    const pwSubmit = document.getElementById("pw_submit");
    const form = document.getElementById("password-strength-form");
    form.onsubmit = e => {
        e.preventDefault();
        const pw = document.getElementById("pw").value;
        const result = estimatePasswordStrength(pw);
        document.getElementById("result").innerHTML = 
            `Estimated entropy: <b>${result.entropy} bits</b><br>` +
            `Estimated crack time: <b>${result.time}</b>`;
    };

    const tierButtons = document.querySelectorAll(".tier-btn");
    tierButtons.forEach(btn => {
        btn.addEventListener("click", () => {
            pwInput.value = btn.getAttribute("data-password");
            pwSubmit.click();
        });
    });
});
</script>


<form id="password-strength-form">
    <h3>Test a password:</h3><br>
    <input type="text" id="pw" style="width:300px" />
    <button id="pw_submit" type="submit">Estimate Strength</button>
    <div id="result" style="margin-top:10px;"></div>
</form>

<div style="margin-top:15px;">
    <p>Try examples:</p>
    <button class="tier-btn" data-password="michael123">ðŸŸ© Tier 1</button>
    <button class="tier-btn" data-password="Summer!2023">ðŸŸ¨ Tier 2</button>
    <button class="tier-btn" data-password="Goose-Coffee-Window-3">ðŸŸ§ Tier 3</button>
    <button class="tier-btn" data-password="Tg5v!3M#fL9@bZ1$">ðŸŸ¥ Tier 4</button>
  </div>