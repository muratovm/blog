{{/* page-card.html */}}
{{- $page := . -}}

{{/* 1. Try to grab a page-local banner first (leaf bundle) */}}
{{ $img := $page.Resources.GetMatch $page.Params.image }}

{{/* 2. Fall back to the shared library in assets/banners/ */}}
{{ if not $img }}
  {{ $img = resources.Get (printf "banners/%s" $page.Params.image) }}
{{ end }}

{{/* 3. Optional: fail-fast if the image wasnâ€™t found */}}
{{ if not $img }}
  {{ errorf "Banner %q not found for %q" $page.Params.image $page.File.Path }}
{{ end }}

<div class="page-card">
  {{ with $img }}
    <a href="{{ $page.RelPermalink }}">
      <img src="{{ .RelPermalink }}"
           width="{{ .Width }}" height="{{ .Height }}"
           loading="lazy"
           alt="{{ $page.Title }}">
    </a>
  {{ end }}

  <div style="padding-left:0.5rem;">
    <h3><a href="{{ $page.RelPermalink }}" style="text-decoration:none;color:inherit;">
      {{ $page.Title }}
    </a></h3>
  </div>
</div>